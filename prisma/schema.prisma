// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider     = "mysql"
  url          = env("DATABASE_URL")
  relationMode = "prisma"
}

model User {
  id        String    @id @default(cuid())
  name      String?
  email     String?   @unique
  password  String
  role      String    @default("USER")
  active    Boolean   @default(false)
  vehicles  Vehicle[]
  createdAt DateTime? @default(now())
  updatedAt DateTime? @updatedAt
}

model Customer {
  id           String    @id() @default(cuid())
  name         String
  email        String?
  phone        String?
  address      String?
  website      String?
  taxId        String?
  customerType String    @default("INDIVIDUAL") // TODO: enum
  vehicles     Vehicle[]
  createdAt    DateTime? @default(now())
  updatedAt    DateTime? @updatedAt
}

model VehicleManufacturer {
  id           String        @id @default(cuid())
  name         String?
  description  String?
  country      String?
  vehicleTypes VehicleType[]
  createdAt    DateTime?     @default(now())
  updatedAt    DateTime?     @updatedAt
}

model VehicleType {
  id             String              @id @default(cuid())
  modelType      String?
  description    String?
  manufacturer   VehicleManufacturer @relation(fields: [manufacturerId], references: [id])
  manufacturerId String
  vehiclesInfo   VehicleInfo[]
  createdAt      DateTime?           @default(now())
  updatedAt      DateTime?           @updatedAt
}

model Color {
  id           String        @id @default(cuid())
  color        String?
  description  String? //arabic representation
  vehiclesInfo VehicleInfo[]
  createdAt    DateTime?     @default(now())
  updatedAt    DateTime?     @updatedAt
}

model Vehicle {
  id               Int               @id @default(autoincrement())
  vin              String            @unique
  reqNo            String
  reqDate          String
  bayanNo          String
  bayanDate        String
  port             String // TODO: add enum
  paymentType      String            @default("CARD") // TODO: add enum
  price            Float
  tax              Float
  customer         Customer?         @relation(fields: [customerId], references: [id])
  customerId       String?
  vehicleInfo      VehicleInfo?
  visualInspection VisualInspection?
  emissionTest     Emission?
  highBeamLevel    HighBeamLevel?
  sideSlip         SideSlip?
  suspensionTest   Suspension?
  brakeTest        Brake?
  userId           String
  user             User              @relation(fields: [userId], references: [id], onDelete: NoAction)
  createdAt        DateTime?         @default(now())
  updatedAt        DateTime?         @updatedAt
}

model VehicleInfo {
  vehicleId     Int         @id
  vehicle       Vehicle     @relation(fields: [vehicleId], references: [id], onDelete: Cascade)
  color         Color       @relation(fields: [colorId], references: [id])
  colorId       String
  year          String
  vehicleType   VehicleType @relation(fields: [vehicleTypeId], references: [id])
  vehicleTypeId String
  category      String      @default("PASSENGER") // TODO: add enum
  condition     String      @default("USED") // TODO: add enum
  fuelType      String      @default("PETROL") // TODO: add enum
  engine        String?
  engineSize    String?
  gear          String?     @default("AUTOMATIC") // TODO: add enum
  mileage       String
  seats         String
  remarks       String?
  createdAt     DateTime?   @default(now())
  updatedAt     DateTime?   @updatedAt
}

model Emission {
  vehicleId Int       @id
  vehicle   Vehicle   @relation(fields: [vehicleId], references: [id], onDelete: Cascade)
  co        Float? //gasoline
  hc        Float? //gasoline
  diesel    Float? //diesel
  result    String?   @default("PASS")
  createdAt DateTime? @default(now())
  updatedAt DateTime? @updatedAt
}

model HighBeamLevel {
  vehicleId Int       @id
  vehicle   Vehicle   @relation(fields: [vehicleId], references: [id], onDelete: Cascade)
//  level     Float?
  left      Float?
  right     Float?
  result    String?   @default("PASS")
  createdAt DateTime? @default(now())
  updatedAt DateTime? @updatedAt
}

model SideSlip {
  vehicleId Int       @id
  vehicle   Vehicle   @relation(fields: [vehicleId], references: [id], onDelete: Cascade)
  reading   Float?
  result    String?   @default("PASS")
  createdAt DateTime? @default(now())
  updatedAt DateTime? @updatedAt
}

model Suspension {
  vehicleId Int       @id
  vehicle   Vehicle   @relation(fields: [vehicleId], references: [id], onDelete: Cascade)
  fl        Float //front left
  fr        Float //front right
  rl        Float //rear left
  rr        Float //rear right
  result    String?   @default("PASS")
  createdAt DateTime? @default(now())
  updatedAt DateTime? @updatedAt
}

model Brake {
  vehicleId Int       @id
  vehicle   Vehicle   @relation(fields: [vehicleId], references: [id], onDelete: Cascade)
  parking   Float //parking brake
  front     Float //front brake
  rear      Float //rear brake
  result    String?   @default("PASS")
  createdAt DateTime? @default(now())
  updatedAt DateTime? @updatedAt
}

model VisualInspection {
  vehicleId            Int       @id
  vehicle              Vehicle   @relation(fields: [vehicleId], references: [id], onDelete: Cascade)
  dimensions           String    @default("PASS")
  color                String    @default("PASS")
  identificationNo     String    @default("PASS")
  information          String    @default("PASS")
  exteriorStructure    String    @default("PASS")
  electricSys          String    @default("PASS")
  brakeSys             String    @default("PASS") //main
  brakeCylinders       String    @default("PASS")
  brakeFluidTank       String    @default("PASS")
  brakeHosesAndTubes   String    @default("PASS")
  brakePedal           String    @default("PASS")
  airTank              String    @default("PASS")
  brakeDiscs           String    @default("PASS")
  autoBrakeCheck       String    @default("PASS")
  staticBrakeCheck     String    @default("PASS")
  dynamicBrakeCheck    String    @default("PASS")
  lights               String    @default("PASS") //main
  headLights           String    @default("PASS")
  rearTrafficLights    String    @default("PASS")
  rearFogLights        String    @default("PASS")
  frontTrafficLights   String    @default("PASS")
  turnSignalLights     String    @default("PASS")
  hazardWarningLights  String    @default("PASS")
  reverseLights        String    @default("PASS")
  rearPlateLights      String    @default("PASS")
  brakeLights          String    @default("PASS")
  glass                String    @default("PASS")
  steeringSys          String    @default("PASS")
  steeringWheel        String    @default("PASS") //main
  ballJoints           String    @default("PASS")
  steeringArms         String    @default("PASS")
  steeringGearBox      String    @default("PASS")
  hydraulicSteeringSys String    @default("PASS")
  balanceShaft         String    @default("PASS")
  transmissionParts    String    @default("PASS")
  suspensionSys        String    @default("PASS")
  frontRearSuspension  String    @default("PASS")
  frontRearSprings     String    @default("PASS")
  shockAbsorbers       String    @default("PASS")
  exhaustSys           String    @default("PASS")
  mufflers             String    @default("PASS")
  wipersAndWashers     String    @default("PASS")
  sideMirrors          String    @default("PASS")
  doorSafty            String    @default("PASS")
  tires                String    @default("PASS")
  wheels               String    @default("PASS")
  engine               String    @default("PASS")
  noisePollution       String    @default("PASS")
  fuelSys              String    @default("PASS")
  truckBarriers        String    @default("PASS")
  wheelDeviation       String    @default("PASS")
  fifthWheel           String    @default("PASS")
  gaseousPollutants    String    @default("PASS")
  exhaustGasesGasoline String    @default("PASS")
  exhaustGasesDiesel   String    @default("PASS")
  horn                 String    @default("PASS")
  handBrake            String    @default("PASS")
  safetyBelts          String    @default("PASS")
  seats                String    @default("PASS")
  rearViewMirror       String    @default("PASS")
  headRestraints       String    @default("PASS")
  sunVisors            String    @default("PASS")
  speedometer          String    @default("PASS")
  odometer             String    @default("PASS")
  speedWarning         String    @default("PASS")
  dashboardIndicators  String    @default("PASS")
  saftyRequirements    String    @default("PASS")
  modernSystems        String    @default("PASS")
  fuelEconomy          String    @default("PASS")
  notArmoured          String    @default("PASS")
  notTaxi              String    @default("PASS")
  notSalvage           String    @default("PASS")
  notPolice            String    @default("PASS")
  createdAt            DateTime? @default(now())
  updatedAt            DateTime? @updatedAt
}
